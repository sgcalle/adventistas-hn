<?xml version="1.0" encoding="UTF-8"?>
<templates id="template">

    <t t-name="PosWalletCustomerScreenWidget">
        <!--        <div class='subwindow collapsed'>-->
        <!--            <div class='subwindow-container'>-->
        <!--                <div class='subwindow-container-fix pos_wallet'>-->
        <!--                    <t t-set="client" t-value="widget.pos.get_client()"/>-->
        <!--                    <div class="autocomplete">-->
        <!--                        <input type="text" class="client_selection__input"-->
        <!--                               placeholder="Client name, id, email, barcode..."/>-->
        <!--                    </div>-->
        <!--                    <div class="clientlist-screen">-->
        <!--                        <div class="client-picture">-->
        <!--                            <img alt="Partner logo" class="js-partner-image" style="width: 64px; height: 64px; object-fit: cover;"-->
        <!--                                t-attf-src="/web/image?model=res.partner&amp;id=#{client.id}&amp;field=image_128"/>-->
        <!--                        </div>-->
        <!--                    </div>-->
        <!--                    <div class="clientlist-screen">-->
        <!--                        <div class="client-name">-->
        <!--                            <t t-if="client" t-esc="client.name"/>-->
        <!--                            <t t-else="">Customer</t>-->
        <!--                        </div>-->
        <!--                    </div>-->

        <!--                    <button class="button-load-wallet js_btn_popup_wallet">Load wallet</button>-->
        <!--                </div>-->
        <!--            </div>-->
        <!--        </div>-->
    </t>

    <t t-name="PosWalletRow">
        <tr t-attr-data-id="wallet.id">
            <td class="js_wallet-name"><t t-esc="wallet.name"/></td>
            <td class="js_wallet-amount"><t t-esc="wallet.amount"/></td>
        </tr>
    </t>

    <t t-name="PosWalletLoadWalletForm">
        <div role="dialog" class="modal-dialog">
            <div class="popup popup-alert pos-bootstrap pos_wallet">
                <form class="js_load_wallet_popup_form">
                    <div class="js_load_wallet_owl_component"/>
                </form>
            </div>
        </div>
    </t>

    <div owl="1" t-name="PosWalletLoadWalletComponent">
        <p class="title">Load wallet</p>
        <section class="body">
            <div class="input-with-label">
                <label>Choose your wallet</label>
                <select class="form-select js_wallet_category" t-model="state.walletCategory">
                    <t t-foreach="props.walletPopup.options.wallets" t-as="wallet" t-key="'option-walletPopup-categ-'+wallet.id">
                        <option t-att-value="wallet.id"><t t-esc="wallet.name"/></option>
                    </t>
                </select>
            </div>

            <div class="input-with-label">
                <label>Payment method</label>
                <select class="form-select js_payment_method" t-model="state.paymentMethod">
                    <t t-foreach="props.pos.payment_methods" t-as="payment_method">
                        <option t-att-value="payment_method.id"><t t-esc="payment_method.name"/></option>
                    </t>
                </select>
            </div>

            <div class="input-with-label">
                <label>Amount</label>
                <input type="text" class="form-control wallet-amount js_wallet_amount"
                       t-on-change="triggerInputAction"
                       t-att-value="state.paymentAmount"
                       t-ref="walletAmount" aria-label="Amount"/>
            </div>

        </section>
        <div class="footer">
            <button class="button cancel" type="button">Cancel</button>
            <button class="confirm js_btn_submit_load_wallet"
                    t-att-disabled="!formIsValid"
                    type="submit">Load</button>
        </div>
    </div>

    <t t-extend="PaymentScreen-Paymentlines">
        <t t-jquery='.paymentlines-empty > .total' t-operation='replace'>
            <div class='total'>
                <t t-esc="widget.format_currency(order.get_total_with_tax() + order.get_rounding_applied() - order.get_wallet_payments_total())"/>
            </div>
        </t>
    </t>

</templates>
